<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Progressive React</title>
  <meta name="description" content="Building progressive and performant sites with React">

  <!-- Schema.org markup for Google+ -->
  
  <meta itemprop="name" content="Progressive React">  
  <meta itemprop="description" content="Building progressive and performant sites with React">  
  <meta itemprop="image" content="https://houssein.me/assets/progressive-react/banner.png"> 

  <!-- Twitter Card data -->
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:site" content="@hdjirdeh">
  <meta name="twitter:creator" content="@hdjirdeh"> 
  <meta name="twitter:title" content="Progressive React">  
  <meta name="twitter:url" content="https://houssein.me/progressive-react">  
  <meta name="twitter:description" content="Building progressive and performant sites with React">  
  <meta name="twitter:image" content="https://houssein.me/assets/progressive-react/banner.png"> 

  <!-- Open Graph data -->
  
  <meta property="og:title" content="Progressive React"> 
  <meta property="og:type" content="article" /> 
  <meta property="og:url" content="https://houssein.me/progressive-react">  
  <meta property="og:image" content="https://houssein.me/assets/progressive-react/banner.png">  
  <meta property="og:description" content="Building progressive and performant sites with React">  
  <meta property="article:published_time" content="2019-02-20 10:00:00 +0000" />
  <meta property="article:modified_time" content="2019-02-20 10:00:00 +0000" /> 
  <meta property="fb:admins" content="1518546144" />
  
  <!-- Icons -->
  <meta name="msapplication-TileColor" content="#b91d47">
	<meta name="msapplication-TileImage" content="/icons/mstile-150x150.png">
  <meta name="msapplication-config" content="/icons/browserconfig.xml">

	<meta name="apple-mobile-web-app-capable" content="yes">
	<meta name="apple-mobile-web-app-status-bar-style" content="default">

  <link rel="manifest" href="/icons/site.webmanifest">
  <link rel="mask-icon" href="/icons/safari-pinned-tab.svg" color="#d0113f">

  <link rel="shortcut icon" type="image/x-icon" href="/icons/favicon.ico" />
  <link rel="shortcut icon" type="image/png" sizes="32x32" href="/icons/favicon-32x32.png">
  <link rel="shortcut icon" type="image/png" sizes="16x16" href="/icons/favicon-16x16.png">

  <link rel="apple-touch-icon" sizes="180x180" href="/icons/apple-touch-icon.png">
	<link rel="apple-touch-icon" sizes="120x120" href="/icons/apple-touch-icon-120x120.png">
	<link rel="apple-touch-icon" sizes="152x152" href="/icons/apple-touch-icon-152x152.png">
	<link rel="apple-touch-icon" sizes="180x180" href="/icons/apple-touch-icon-180x180.png">

  <meta name="theme-color" content="#ffffff">

  <link rel="canonical" href="https://houssein.me/progressive-react">
  <link rel="author" href="https://plus.google.com/109730836902589271473" />
  <link rel="alternate" type="application/rss+xml" title="Houssein Djirdeh" href="https://houssein.me/feed.xml">  
  <style>
    /*! TACHYONS v4.9.1 | http://tachyons.io  (SELECTED STYLES) */
    .dim:active,.dim:focus,.dim:hover{-webkit-backface-visibility:hidden}.f-6,.f-headline{font-size:6rem}.f-5,.f-subheadline{font-size:5rem}.f1{font-size:3rem}.f2{font-size:2.25rem}.f3{font-size:1.5rem}.f4{font-size:1.25rem}.f5{font-size:1rem}.f6{font-size:.875rem}.f7{font-size:.75rem}.br0{border-radius:0}.br1{border-radius:.125rem}.br2{border-radius:.25rem}.br3{border-radius:.5rem}.br4{border-radius:1rem}@media screen and (min-width:30em){.f1-ns{font-size:3rem}.f2-ns{font-size:2.25rem}.f3-ns{font-size:1.5rem}.f4-ns{font-size:1.25rem}.f5-ns{font-size:1rem}.f6-ns{font-size:.875rem}.f7-ns{font-size:.75rem}.fw1-ns{font-weight:100}.fw2-ns{font-weight:200}.fw3-ns{font-weight:300}.fw4-ns{font-weight:400}.fw5-ns{font-weight:500}.fw6-ns{font-weight:600}.fw7-ns{font-weight:700}.fw8-ns{font-weight:800}.fw9-ns{font-weight:900}.pa0-ns{padding:0}.pa1-ns{padding:.25rem}.pa2-ns{padding:.5rem}.pa3-ns{padding:1rem}.pa4-ns{padding:2rem}.pa5-ns{padding:4rem}.pa6-ns{padding:8rem}.pa7-ns{padding:16rem}.pl0-ns{padding-left:0}.pl1-ns{padding-left:.25rem}.pl2-ns{padding-left:.5rem}.pl3-ns{padding-left:1rem}.pl4-ns{padding-left:2rem}.pl5-ns{padding-left:4rem}.pl6-ns{padding-left:8rem}.pl7-ns{padding-left:16rem}.pr0-ns{padding-right:0}.pr1-ns{padding-right:.25rem}.pr2-ns{padding-right:.5rem}.pr3-ns{padding-right:1rem}.pr4-ns{padding-right:2rem}.pr5-ns{padding-right:4rem}.pr6-ns{padding-right:8rem}.pr7-ns{padding-right:16rem}.pb0-ns{padding-bottom:0}.pb1-ns{padding-bottom:.25rem}.pb2-ns{padding-bottom:.5rem}.pb3-ns{padding-bottom:1rem}.pb4-ns{padding-bottom:2rem}.pb5-ns{padding-bottom:4rem}.pb6-ns{padding-bottom:8rem}.pb7-ns{padding-bottom:16rem}.pt0-ns{padding-top:0}.pt1-ns{padding-top:.25rem}.pt2-ns{padding-top:.5rem}.pt3-ns{padding-top:1rem}.pt4-ns{padding-top:2rem}.pt5-ns{padding-top:4rem}.pt6-ns{padding-top:8rem}.pt7-ns{padding-top:16rem}.pv0-ns{padding-top:0;padding-bottom:0}.pv1-ns{padding-top:.25rem;padding-bottom:.25rem}.pv2-ns{padding-top:.5rem;padding-bottom:.5rem}.pv3-ns{padding-top:1rem;padding-bottom:1rem}.pv4-ns{padding-top:2rem;padding-bottom:2rem}.pv5-ns{padding-top:4rem;padding-bottom:4rem}.pv6-ns{padding-top:8rem;padding-bottom:8rem}.pv7-ns{padding-top:16rem;padding-bottom:16rem}.ph0-ns{padding-left:0;padding-right:0}.ph1-ns{padding-left:.25rem;padding-right:.25rem}.ph2-ns{padding-left:.5rem;padding-right:.5rem}.ph3-ns{padding-left:1rem;padding-right:1rem}.ph4-ns{padding-left:2rem;padding-right:2rem}.ph5-ns{padding-left:4rem;padding-right:4rem}.ph6-ns{padding-left:8rem;padding-right:8rem}.ph7-ns{padding-left:16rem;padding-right:16rem}.ma0-ns{margin:0}.ma1-ns{margin:.25rem}.ma2-ns{margin:.5rem}.ma3-ns{margin:1rem}.ma4-ns{margin:2rem}.ma5-ns{margin:4rem}.ma6-ns{margin:8rem}.ma7-ns{margin:16rem}.ml0-ns{margin-left:0}.ml1-ns{margin-left:.25rem}.ml2-ns{margin-left:.5rem}.ml3-ns{margin-left:1rem}.ml4-ns{margin-left:2rem}.ml5-ns{margin-left:4rem}.ml6-ns{margin-left:8rem}.ml7-ns{margin-left:16rem}.mr0-ns{margin-right:0}.mr1-ns{margin-right:.25rem}.mr2-ns{margin-right:.5rem}.mr3-ns{margin-right:1rem}.mr4-ns{margin-right:2rem}.mr5-ns{margin-right:4rem}.mr6-ns{margin-right:8rem}.mr7-ns{margin-right:16rem}.mb0-ns{margin-bottom:0}.mb1-ns{margin-bottom:.25rem}.mb2-ns{margin-bottom:.5rem}.mb3-ns{margin-bottom:1rem}.mb4-ns{margin-bottom:2rem}.mb5-ns{margin-bottom:4rem}.mb6-ns{margin-bottom:8rem}.mb7-ns{margin-bottom:16rem}.mt0-ns{margin-top:0}.mt1-ns{margin-top:.25rem}.mt2-ns{margin-top:.5rem}.mt3-ns{margin-top:1rem}.mt4-ns{margin-top:2rem}.mt5-ns{margin-top:4rem}.mt6-ns{margin-top:8rem}.mt7-ns{margin-top:16rem}.mv0-ns{margin-top:0;margin-bottom:0}.mv1-ns{margin-top:.25rem;margin-bottom:.25rem}.mv2-ns{margin-top:.5rem;margin-bottom:.5rem}.mv3-ns{margin-top:1rem;margin-bottom:1rem}.mv4-ns{margin-top:2rem;margin-bottom:2rem}.mv5-ns{margin-top:4rem;margin-bottom:4rem}.mv6-ns{margin-top:8rem;margin-bottom:8rem}.mv7-ns{margin-top:16rem;margin-bottom:16rem}.mh0-ns{margin-left:0;margin-right:0}.mh1-ns{margin-left:.25rem;margin-right:.25rem}.mh2-ns{margin-left:.5rem;margin-right:.5rem}.mh3-ns{margin-left:1rem;margin-right:1rem}.mh4-ns{margin-left:2rem;margin-right:2rem}.mh5-ns{margin-left:4rem;margin-right:4rem}.mh6-ns{margin-left:8rem;margin-right:8rem}.mh7-ns{margin-left:16rem;margin-right:16rem}.mw1-ns{max-width:1rem}.mw2-ns{max-width:2rem}.mw3-ns{max-width:4rem}.mw4-ns{max-width:8rem}.mw5-ns{max-width:16rem}.mw6-ns{max-width:32rem}.mw7-ns{max-width:48rem}.mw8-ns{max-width:64rem}.mw9-ns{max-width:96rem}}.normal{font-weight:400}.b{font-weight:700}.fw1{font-weight:100}.fw2{font-weight:200}.fw3{font-weight:300}.fw4{font-weight:400}.fw5{font-weight:500}.fw6{font-weight:600}.fw7{font-weight:700}.fw8{font-weight:800}.fw9{font-weight:900}.near-black{color:#111}.white{color:#fff}.ttl{text-transform:lowercase}.flex{display:-webkit-box;display:-ms-flexbox;display:flex}.flex-column{-webkit-box-orient:vertical;-webkit-box-direction:normal;-ms-flex-direction:column;flex-direction:column}.items-start{-webkit-box-align:start;-ms-flex-align:start;align-items:flex-start}.items-end{-webkit-box-align:end;-ms-flex-align:end;align-items:flex-end}.items-center{-webkit-box-align:center;-ms-flex-align:center;align-items:center}.justify-center{-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center}.justify-between{-webkit-box-pack:justify;-ms-flex-pack:justify;justify-content:space-between}.pa0{padding:0}.pa1{padding:.25rem}.pa2{padding:.5rem}.pa3{padding:1rem}.pa4{padding:2rem}.pa5{padding:4rem}.pa6{padding:8rem}.pa7{padding:16rem}.pl0{padding-left:0}.pl1{padding-left:.25rem}.pl2{padding-left:.5rem}.pl3{padding-left:1rem}.pl4{padding-left:2rem}.pl5{padding-left:4rem}.pl6{padding-left:8rem}.pl7{padding-left:16rem}.pr0{padding-right:0}.pr1{padding-right:.25rem}.pr2{padding-right:.5rem}.pr3{padding-right:1rem}.pr4{padding-right:2rem}.pr5{padding-right:4rem}.pr6{padding-right:8rem}.pr7{padding-right:16rem}.pb0{padding-bottom:0}.pb1{padding-bottom:.25rem}.pb2{padding-bottom:.5rem}.pb3{padding-bottom:1rem}.pb4{padding-bottom:2rem}.pb5{padding-bottom:4rem}.pb6{padding-bottom:8rem}.pb7{padding-bottom:16rem}.pt0{padding-top:0}.pt1{padding-top:.25rem}.pt2{padding-top:.5rem}.pt3{padding-top:1rem}.pt4{padding-top:2rem}.pt5{padding-top:4rem}.pt6{padding-top:8rem}.pt7{padding-top:16rem}.pv0{padding-top:0;padding-bottom:0}.pv1{padding-top:.25rem;padding-bottom:.25rem}.pv2{padding-top:.5rem;padding-bottom:.5rem}.pv3{padding-top:1rem;padding-bottom:1rem}.pv4{padding-top:2rem;padding-bottom:2rem}.pv5{padding-top:4rem;padding-bottom:4rem}.pv6{padding-top:8rem;padding-bottom:8rem}.pv7{padding-top:16rem;padding-bottom:16rem}.ph0{padding-left:0;padding-right:0}.ph1{padding-left:.25rem;padding-right:.25rem}.ph2{padding-left:.5rem;padding-right:.5rem}.ph3{padding-left:1rem;padding-right:1rem}.ph4{padding-left:2rem;padding-right:2rem}.ph5{padding-left:4rem;padding-right:4rem}.ph6{padding-left:8rem;padding-right:8rem}.ph7{padding-left:16rem;padding-right:16rem}.ma0{margin:0}.ma1{margin:.25rem}.ma2{margin:.5rem}.ma3{margin:1rem}.ma4{margin:2rem}.ma5{margin:4rem}.ma6{margin:8rem}.ma7{margin:16rem}.ml0{margin-left:0}.ml1{margin-left:.25rem}.ml2{margin-left:.5rem}.ml3{margin-left:1rem}.ml4{margin-left:2rem}.ml5{margin-left:4rem}.ml6{margin-left:8rem}.ml7{margin-left:16rem}.mr0{margin-right:0}.mr1{margin-right:.25rem}.mr2{margin-right:.5rem}.mr3{margin-right:1rem}.mr4{margin-right:2rem}.mr5{margin-right:4rem}.mr6{margin-right:8rem}.mr7{margin-right:16rem}.mb0{margin-bottom:0}.mb1{margin-bottom:.25rem}.mb2{margin-bottom:.5rem}.mb3{margin-bottom:1rem}.mb4{margin-bottom:2rem}.mb5{margin-bottom:4rem}.mb6{margin-bottom:8rem}.mb7{margin-bottom:16rem}.mt0{margin-top:0}.mt1{margin-top:.25rem}.mt2{margin-top:.5rem}.mt3{margin-top:1rem}.mt4{margin-top:2rem}.mt5{margin-top:4rem}.mt6{margin-top:8rem}.mt7{margin-top:16rem}.mv0{margin-top:0;margin-bottom:0}.mv1{margin-top:.25rem;margin-bottom:.25rem}.mv2{margin-top:.5rem;margin-bottom:.5rem}.mv3{margin-top:1rem;margin-bottom:1rem}.mv4{margin-top:2rem;margin-bottom:2rem}.mv5{margin-top:4rem;margin-bottom:4rem}.mv6{margin-top:8rem;margin-bottom:8rem}.mv7{margin-top:16rem;margin-bottom:16rem}.mh0{margin-left:0;margin-right:0}.mh1{margin-left:.25rem;margin-right:.25rem}.mh2{margin-left:.5rem;margin-right:.5rem}.mh3{margin-left:1rem;margin-right:1rem}.mh4{margin-left:2rem;margin-right:2rem}.mh5{margin-left:4rem;margin-right:4rem}.mh6{margin-left:8rem;margin-right:8rem}.mh7{margin-left:16rem;margin-right:16rem}.mw1{max-width:1rem}.mw2{max-width:2rem}.mw3{max-width:4rem}.mw4{max-width:8rem}.mw5{max-width:16rem}.mw6{max-width:32rem}.mw7{max-width:48rem}.mw8{max-width:64rem}.mw9{max-width:96rem}.w-100{width:100%}.dim{opacity:1;-webkit-transition:opacity .15s ease-in;transition:opacity .15s ease-in}.dim:focus,.dim:hover{backface-visibility:hidden;opacity:.5;-webkit-transition:opacity .15s ease-in;transition:opacity .15s ease-in}.dim:active{backface-visibility:hidden;opacity:.8;-webkit-transition:opacity .15s ease-out;transition:opacity .15s ease-out}.grow{-moz-osx-font-smoothing:grayscale;-webkit-backface-visibility:hidden;backface-visibility:hidden;-webkit-transform:translateZ(0);transform:translateZ(0);-webkit-transition:-webkit-transform .25s ease-out;transition:-webkit-transform .25s ease-out;transition:transform .25s ease-out;transition:transform .25s ease-out,-webkit-transform .25s ease-out}.grow:focus,.grow:hover{-webkit-transform:scale(1.05);transform:scale(1.05)}.grow:active{-webkit-transform:scale(.9);transform:scale(.9)}.dib{display:inline-block}.h1{height:1rem}.h2{height:2rem}.h3{height:4rem}.h4{height:8rem}.h5{height:16rem}.bb{border-bottom-style:solid;border-bottom-width:1px}.bt{border-top-style:solid;border-top-width:1px}.link{text-decoration:none;-webkit-transition:color .15s ease-in;transition:color .15s ease-in}.link:active,.link:hover,.link:link,.link:visited{-webkit-transition:color .15s ease-in;transition:color .15s ease-in}.link:focus{-webkit-transition:color .15s ease-in;transition:color .15s ease-in;outline:currentColor dotted 1px}.center{margin-right:auto;margin-left:auto}img,video{max-width:100%}    
    /* Extra styles */
    #markup video,body,html{width:100%}#markup aside a,#markup li a,#markup p a,.link-effect{text-decoration:none;transition:color .15s ease-in;border-bottom:1px solid #d0113f}#markup aside p,#markup figure,body,html{margin:0}body,html{padding:0;background:#fff;font-family:avenir next,avenir,helvetica neue,helvetica,ubuntu,roboto,noto,segoe ui,arial,sans-serif;font-weight:400;color:#444;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}#markup aside ol,#markup aside p,#markup aside ul{font-weight:500}*{box-sizing:border-box}.hover-red:hover,.red{color:#d0113f}.bg-red{background-color:#d0113f}#home-icon-container{transition:all .15s ease-in-out}#home-icon-container:hover #home-icon{fill:#d0113f}.lh-copy{line-height:1.7}#markup h2,#markup h3,#markup h4{margin-top:3rem;margin-bottom:1rem}#markup aside{margin:30px 0;background:#f1ece9;padding:25px;border-radius:10px}#markup aside.secondary{background:#e3f3f9}#markup aside a,#markup li a,#markup p a{font-weight:600;color:#d0113f;-webkit-box-shadow:inset 0 -2px 0 0 #d0113f;box-shadow:inset 0 -2px 0 0 #d0113f;padding-bottom:2px}#markup aside a:hover,#markup blockquote footer,#markup li a:hover,#markup p a:hover{color:#111}#markup aside h1,#markup aside h2,#markup aside h3,#markup aside h4{margin-top:0}#markup aside img{margin-top:2rem}#markup blockquote{color:#767676;border-left:4px solid #e9e9e9;padding-left:15px;letter-spacing:-1px;font-style:italic;margin:0}#markup li code,#markup p code{background:#f8f8f8;padding:5px}#markup figure code,#markup figure li code{background:#f8f8f8;font-size:.95rem;padding:1rem}@media (max-width:30rem){#markup figure code,#markup figure li code{font-size:.8rem}}#markup img{left:50%;position:relative;transform:translate(-50%,0);top:50%;margin:0 -50% 0 0}@media (min-width:560px){#markup img.small,video.small{max-width:500px}}#markup img.shadow,video.shadow{box-shadow:0 1px 16px 0 rgba(0,0,0,.2),0 2px 8px 0 rgba(0,0,0,.14),0 4px 8px -1px rgba(0,0,0,.12)}#markup .image-source{font-size:16px;margin:0 0 3rem;text-align:center;letter-spacing:.02rem;color:#d0113f;font-weight:700}#markup .image-source.no-margin{margin-bottom:0}.link-effect{font-weight:600;color:#d0113f;-webkit-box-shadow:inset 0 -2px 0 0 #d0113f;box-shadow:inset 0 -2px 0 0 #d0113f;padding-bottom:2px}.link-effect:hover{color:#111}
    /* Github Highlight */
    /* GitHub highlight (slightly modified) */
    .hljs{display:block;overflow-x:auto;padding:0.5em;color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#404040;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:bold}.hljs-number,.hljs-literal,.hljs-variable,.hljs-template-variable,.hljs-tag .hljs-attr{color:#045252}.hljs-string,.hljs-doctag{color:#d14}.hljs-title,.hljs-section,.hljs-selector-id{color:#900;font-weight:bold}.hljs-subst{font-weight:normal}.hljs-type,.hljs-class .hljs-title{color:#458;font-weight:bold}.hljs-tag,.hljs-name,.hljs-attribute{color:#000080;font-weight:normal}.hljs-regexp,.hljs-link{color:#014c13}.hljs-symbol,.hljs-bullet{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#004d67}.hljs-meta{color:#999;font-weight:bold}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:bold}
  </style>
</head>

<body>

  <div class="flex flex-column items-center justify-between">
    <header class="h5 flex items-center">
  <a id="home-icon-container" href="/" aria-label="Home"><svg width="50" height="50" preserveAspectRatio="none" viewBox="0 0 350 350">
  <defs>
    <clipPath id="a">
      <path d="M0 300h500V0H0z"/>
    </clipPath>
  </defs>
  <g clip-path="url(#a)" transform="matrix(1.33333 0 0 -1.33333 -150 390)">
    <path id="home-icon" fill="#1d1d1d" d="M237.4502 130.5498c5 4.967 11.017 7.45 18.05 7.45 7.033 0 13.033-2.483 18-7.45 5-5 7.5-11.017 7.5-18.05 0-7.033-2.5-13.033-7.5-18-4.967-5-10.967-7.5-18-7.5-7.033 0-13.05 2.5-18.05 7.5-4.967 4.967-7.45 10.967-7.45 18 0 7.033 2.483 13.05 7.45 18.05m87.3 56.85l15.099-15.1c2.368-2.367 2.384-4.716.051-7.05l-17.15-17.15c-2.366-2.366-4.734-2.366-7.1 0l-59.551 59.55-59.299-59.3c-.5-.5-.983-.883-1.45-1.15l-53.95-53.95c-2.367-2.366-4.734-2.366-7.1 0l-17.15 17.151c-2.333 2.333-2.317 4.682.05 7.049l61.15 61.15h.3l55.1 55.1h.35l7.85 7.85c4.6 4.6 9.2 6.95 13.8 7.05h.599c3.467-.067 6.934-1.417 10.401-4.05l13.65-12.6-.1-.1 23.2-23.2v13.2c0 3.333 1.667 5 5 5h11.25c3.333 0 5-1.667 5-5z" fill-rule="evenodd"/>
  </g>
</svg></a>
</header>
  </div>

  <div class="flex flex-column justify-between mw7 pb5 center w-100 ph4">
    <div class="flex flex-column mt2 mb5">
      <h1 class="f3 f1-ns ttl mb2 near-black lh-title">
        Progressive React
      </h1>
      <time class="f5 fw6 red" datetime="2019-02-20 10:00:00 +0000">February 20, 2019</time>
    </div>
    <div id="markup" class="f5 f4-ns lh-copy near-black">
      <aside class="secondary">
<p><strong>tl.dr:</strong> Want to make your React site more performant? Here's a quick checklist:</p>
<ol>
  <li><b>Measure component-level rendering performance with either of the following:</b></li>
    <ul>
      <li>Chrome DevTools Performance panel</li>
      <li>React DevTools profiler</li>
    </ul>
  <li><b>Minimize unecessary component re-renders</b></li>
    <ul>
      <li>Override <code>shouldComponentUpdate</code> where applicable</li>
      <li>Use <code>PureComponent</code> for class components</li>
      <li>Use <code>React.memo</code> for functional components</li>
      <li>Memoize Redux selectors (with <code>reselect</code> for example)</li>
      <li>Virtualize super long lists (with <code>react-window</code> for example)</li>
    </ul>
  <li><b>Measure app-level performance with Lighthouse</b></li>
  <li><b>Improve app-level performance</b></li>
    <ul>
      <li>If you are not server-side rendering, split components with <code>React.lazy</code></li>
      <li>If you are server-side rendering, split components with a library like <code>loadable-components</code></li>
      <li>Use a service worker to cache files that are worth caching. Workbox will make your life easier.</li>
      <li>If you are server-side rendering, use streams instead of strings (with <code>renderToNodeStream</code> and <code>renderToStaticNodeStream</code>)</li>
      <li>Can't SSR? Pre-render instead. Libraries like <code>react-snap</code> can help.</li>
      <li>Extract critical styles if you are using a CSS-in-JS library.</li>
      <li>Make sure your application is accessible. Consider using libraries like <code>React A11y</code> and <code>react-axe</code>.</li>
      <li>Add a web app manifest if you think users would like to access your site through their device homescreen.</li>
    </ul>
</ol>
</aside>

<p>Performance advocates, like me, spend a lot of time ‚Äúadvocating‚Äù for faster sites. Sometimes, it‚Äôs a bit overwhelming.</p>

<video class="shadow" autoplay="" loop="" muted="" playsinline="">
  <source src="/assets/progressive-react/panda-wildin.mp4" type="video/mp4" />
  <source src="/assets/progressive-react/panda-wildin.webm" type="video/webm" />
</video>

<p>I‚Äôm going to take a leaf out of this panda‚Äôs book and tell you why you should stop using React today.</p>

<p>Okay, that‚Äôs just a joke. This article will actually cover how you can continue to work on the same React apps that you build, but to consider adding a number of optimizations to it. The key point here is to try and build your React site so that <strong>more people can use it</strong>.</p>

<h2 id="introduction">Introduction</h2>

<p>What does it mean to build a site that more people can use? How does this get measured? Why should this get measured?</p>

<p>Let‚Äôs try and answer this question by taking a look at the easiest way to start building a React app - <a href="https://github.com/facebook/create-react-app">Create React App</a>. A brand new project from scratch has the following dependencies:</p>

<ul>
  <li>The <code class="highlighter-rouge">react</code> core library that lets you build things with React components: <strong>2.5 kB</strong></li>
  <li>The <code class="highlighter-rouge">react-dom</code> library to render your components to the DOM: <strong>30.7 kB</strong></li>
  <li>Some initial code including your first component: <strong>~3 kB</strong></li>
</ul>

<p>The numbers here are from v16.6.3.</p>

<p><a href="https://webpagetest.org">WebPageTest</a> can be used to see how long it would take for a brand new CRA application to load on a Moto G4.</p>

<video class="shadow" autoplay="" loop="" muted="" playsinline="">
  <source src="/assets/progressive-react/cra-motog4.mp4" type="video/mp4" />
  <source src="/assets/progressive-react/cra-motog4.ogg" type="video/ogg" />
  <source src="/assets/progressive-react/cra-motog4.webm" type="video/webm" />
</video>

<p>This ‚ÄúHello, World‚Äù application is hosted on Firebase and viewed on Chrome with three different network connection types:</p>

<ul>
  <li><strong>4G</strong> (9 Mbps)</li>
  <li><strong>3G</strong> (1.6 Mbps)</li>
  <li><strong>3G Slow</strong> (400 Kbps)</li>
</ul>

<p>Some latency needs to be accounted as well.</p>

<p>Why use a Moto G4? It‚Äôs a low-end mobile phone similar to what many people use in developing countries as their primary device. On 4G, the application finishes loading in 2 seconds. In 3G Slow, it takes more than 4 seconds for the page to become interactive.</p>

<p>As interesting as these numbers may seem, they aren‚Äôt very useful if you don‚Äôt know who your users are. Your definition of slow can be completely different from mine or somebody else‚Äôs, and your perception on how fast a site loads can be skewed to the device and network connection that you use. Including a desktop machine (with cable connection) in this experiment shows how drastic the difference can be:</p>

<video class="shadow" autoplay="" loop="" muted="" playsinline="">
  <source src="/assets/progressive-react/cra-desktop-motog4.mp4" type="video/mp4" />
  <source src="/assets/progressive-react/cra-desktop-motog4.ogv" type="video/ogg" />
  <source src="/assets/progressive-react/cra-desktop-motog4.webm" type="video/webm" />
</video>

<aside>
<h4>Updates to React DOM üî•</h4>
<p>In terms of how well a React app performs right out of the box, some changes are slated for React DOM that aim to simplify a few things. The event system contains a number of polyfills that aren't needed for many newer browsers, and the team is considering removing/simplifying them where possible.</p> 
<br />
<p>You can keep track of these efforts in the <a href="https://github.com/facebook/react/issues/13525">GitHub issue.</a></p>
</aside>

<h2 id="can-we-measure-the-current-state-of-performance">Can we measure the current state of performance?</h2>

<p>A typical React application can contain many components and third-party libraries. This means that the performance of a ‚ÄúHello World‚Äù app doesn‚Äôt give much insight into how fast an actual application might load, but is there a way to track how well a majority of sites that use a specific tool (like React) perform?</p>

<p><a href="https://httparchive.org/">HTTP Archive</a> might be able to help. It‚Äôs an open-source attempt to keep track of how the web is built, and it does this by crawling over a million sites every month, running them through WebPagetest, and then storing information about them. This includes the number of requests, loading metrics, size of payloads, and so on.</p>

<p><a href="https://github.com/johnmichel/Library-Detector-for-Chrome">Library-Detector-for-Chrome</a> is a Chrome extension that can detect which JavaScript libraries are used on a page. It was recently <a href="https://github.com/GoogleChrome/lighthouse/pull/6081">included</a> as a diagnostic audit to Lighthouse which means that this information can be queried en masse through HTTP Archive. This can help provide a way to analyze results of thousands of sites that use a specific JavaScript library (the React detection mechanism lives <a href="https://github.com/johnmichel/Library-Detector-for-Chrome/blob/master/library/libraries.js#L369-L382">here</a>).</p>

<p>The complete HTTP Archive dataset is public and available on <a href="https://cloud.google.com/bigquery/">BigQuery</a>. After querying over 140,000 domains in emulated mobile conditions (<code class="highlighter-rouge">2019_01_01</code> dataset) that use React, the following results were found:</p>

<ul>
  <li>Median First Meaningful Paint: <strong>6.9s</strong></li>
  <li>Median Time to Interactive: <strong>19.7s</strong></li>
</ul>

<aside>
You can run the <a href="https://bigquery.cloud.google.com/savedquery/1086077897885:77a9b8fb9bf843b79ced4c25fd195779">query</a> yourself on BigQuery.
</aside>

<p>Almost 20 seconds for a site to become interactive is no joke, but it‚Äôs not uncommon to see on large sites using weaker devices and network connections. Also, there are a few reasons why you should take these numbers with a grain of salt:</p>

<ul>
  <li>There are a lot of other factors involved that affect the performance of a site, such as the total amount of JavaScript that gets shipped, the number of images and other assets rendered on a page and so forth. It‚Äôs <strong>not</strong> fair to measure site performance against a single horizontal (‚Äúis React is used on a page‚Äù for example) if all of these other factors aren‚Äôt taken into account.</li>
  <li>Replace ‚ÄúReact‚Äù with any other client-side framework/library in that query and you‚Äôll see similar numbers.</li>
</ul>

<p>There‚Äôs a lot of work that needs to be done before an accurate assessement can be made for how sites in the wild that use a particular library generally perform.</p>

<h2 id="moar-javascript">MOAR JavaScript</h2>

<p>One thing that is not specific to a particular library is the amount of JavaScript that we‚Äôre generally shipping over the wire. The HTTP Archive already provides a handy report for this, but in short, the <em>median</em> JavaScript bytes sent were:</p>

<ul>
  <li><strong>74.7 KB</strong> for mobile webpages in December 15, 2011</li>
  <li><strong>384.4 KB</strong> for mobile webpages in December 15, 2018</li>
</ul>

<p>But wait, this includes over a million URLs! There has to be thousands of random sites that skew these results right?</p>

<p>Fair point. Let‚Äôs try to find the same results but for the top 10,000 Alexa sites:</p>

<ul>
  <li><strong>381.5 KB</strong> for mobile webpages in December 15, 2018 (<a href="https://bigquery.cloud.google.com/savedquery/1086077897885:d5e03a92788a4a6d96aa65c00b08ff74"><em>Query</em></a>)</li>
</ul>

<p>As a whole, we‚Äôre building websites that ship more JavaScript than we did seven years ago, and this makes sense. Sites have become bigger, more interactive and more complex and this number is still gradually increasing in an upward trend year after year. You may have already heard this before, but the more JavaScript you send to the browser, the more time it needs to be parsed, compiled and executed. Consequently, this slows down your site.</p>

<p>It‚Äôs important to note that every site and user base is different. Many developers that ship over 300 KB of JavaScript do not have a problem with how well it performs for most of their users, and that‚Äôs fine. However, if you happen to be concerned that the performance of your React site could be better for your users, <strong>profiling is always a good first step</strong>.</p>

<h2 id="profiling--analyzing">Profiling / Analyzing</h2>

<p>Profiling and analyzing a React application can be looked at as a two-fold approach:</p>

<ul>
  <li><strong>Component-level performance</strong>: This affects how users actually interact with your site. Clicking a button to load a list should feel snappy, but it most likely won‚Äôt be if hundreds of components are re-rendering when they shouldn‚Äôt.</li>
  <li><strong>Initial app-level performance</strong>: This affects how <em>soon</em> users can begin interacting with you site. The amount of code that gets shipped to your users as soon as they load the first page is an example of a factor that affects this.</li>
</ul>

<h2 id="measure-component-level-performance">Measure component-level performance</h2>

<p>To try and summarize the concept of React‚Äôs reconciliation algorithm, or the ‚Äúvirtual DOM‚Äù, in a single sentence: React takes steps to diff between a newer DOM tree and an older tree to figure out what needs to be updated in the UI when data is changed within a component. This makes things a lot less performance intensive than re-rendering the entire application with every state/prop change (<a href="https://reactjs.org/docs/reconciliation.html">a difference between O(N<sup>3</sup>) and O(N)</a>).</p>

<aside>
The <a href="https://overreacted.io/react-as-a-ui-runtime/#reconciliation">React as a UI Runtime</a> article by Dan Abramov explains reconciliation quite nicely.
</aside>

<p>Even with these optimizations baked into React internals, you can always run into the problem of having components in an application re-render when they shouldn‚Äôt. This might not be noticeable for smaller applications, but it can degrade performance significantly if hundreds of components are being rendered on a page.</p>

<p>There are a number of reasons why components render when they shouldn‚Äôt - functions within a component might not be as efficient as they could be, or maybe an entire list of components are being re-rendered when only a single component gets added onto a list. There are tools that you can use to identify which component trees are taking too long to render, such as:</p>

<ul>
  <li>Chrome DevTools Performance panel</li>
  <li>React DevTools profiler</li>
</ul>

<h3 id="analyze-performance-with-the-chrome-devtools-performance-panel">Analyze performance with the Chrome DevTools Performance Panel</h3>

<p>React uses the <a href="https://developer.mozilla.org/en-US/docs/Web/API/User_Timing_API">User Timing API</a> to measure the time a component takes for each step of its lifecycle. You can run performance traces using Chrome DevTools to analyze how efficiently your components mount, render, and unmount during page interactions or reloads.</p>

<p><img alt="DevTools Performance Panel" title="DevTools Performance Panel" data-src="/assets/progressive-react/chrome-perf-panel.png" class="lazyload shadow" /></p>

<aside>
Ben Schwarz has an excellent tutorial that covers this in detail - <a href="https://building.calibreapp.com/debugging-react-performance-with-react-16-and-chrome-devtools-c90698a522ad">Debugging React performance with React 16 and Chrome Devtools</a>.
</aside>

<p>The User Timing API is only used during development and is disabled in production mode. A faster implementation that can be used during production without significantly harming performance was one of the motivations behind building a newer <strong>Profiler</strong> API..</p>

<h3 id="analyze-performance-with-the-react-devtools-profiler">Analyze performance with the React DevTools Profiler</h3>

<p>With <code class="highlighter-rouge">react-dom</code> 16.5, a newer Profiler panel within React DevTools can be used to trace how well your components are rendering in terms of performance. It does this by using the <a href="https://github.com/reactjs/rfcs/pull/51"><code class="highlighter-rouge">Profiler</code></a> API to collect timing information for every component that re-renders.</p>

<p>The <code class="highlighter-rouge">Profiler</code> panel lives as a separate tab within <a href="https://github.com/facebook/react-devtools">React DevTools</a>. Similar to the Performance panel in Chrome DevTools, you can record user interactions and page reloads to analyze how well your components are performing.</p>

<video class="shadow" autoplay="" loop="" muted="" playsinline="">
  <source src="/assets/progressive-react/fetch-profiler.mp4" type="video/mp4" />
</video>

<p>When you stop recording, you‚Äôre greeted with a flame chart that shows you how long each of the components in the page took to render.</p>

<p><img alt="Profiler Flame Chart" title="Profiler Flame Chart" data-src="/assets/progressive-react/profiler-flame-chart.png" class="lazyload" /></p>

<p>You can switch between different <em>commits</em>, or states when DOM nodes are added, removed, or updated, to get more nuanced data of which components are taking their sweet time to render.</p>

<p><img alt="Profiler Commit Chart" title="Profiler Commit Chart" data-src="/assets/progressive-react/profiler-commit-chart.png" class="lazyload" /></p>

<p>These screenshots are from profiling a single user interaction in a simple app which involves fetching a list of trending GitHub repos when a button is clicked. As you can see, there are only two commits:</p>

<ul>
  <li>One for a loading indicator that shows when the list of items are fetched</li>
  <li>One after the API call is completed and the list is populated to the DOM</li>
</ul>

<p>The right hand side shows other useful metadata including commit information or component-specific data such as props and state.</p>

<p><img alt="Profiler Metadata" title="Profiler Metadata" data-src="/assets/progressive-react/profiler-metadata.png" class="lazyload" /></p>

<aside>
Other chart views (ranked, component) are also available for you to fiddle around with in the Profiler. For more details on this (as well as everything else about the Profiler), the <a href="https://reactjs.org/blog/2018/09/10/introducing-the-react-profiler.html">Introducing the React Profiler</a> blog post in the React docs is a must-read.
</aside>

<p>To complicate things up a bit, consider the same example but with multiple API calls being fired to load specific trending repositories based on programming language (JavaScript, Golang, etc‚Ä¶). As expected, there are more commits now:</p>

<p><img alt="Profiler - more commits" title="Profiler - more commits" data-src="/assets/progressive-react/profiler-more-commits.png" class="lazyload" /></p>

<p>The later commits all have longer and more yellow bars in the chart. This means that the time it takes for all the components to finish rendering takes longer as the list on the page grows. This happens because <em>every</em> component in the list re-renders with each new API call. This helps identify an issue that can be resolved relatively quickly: every single item on the list does not need to be re-rendered when new items are being added.</p>

<h3 id="minimize-unecessary-re-renders">Minimize unecessary re-renders</h3>

<p>There are quite a few ways to minimize and remove unecessary re-renders in a React app:</p>

<ul>
  <li>Override <a href="https://reactjs.org/docs/optimizing-performance.html#shouldcomponentupdate-in-action"><code class="highlighter-rouge">shouldComponentUpdate</code></a></li>
</ul>

<figure class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="nx">shouldComponentUpdate</span><span class="p">(</span><span class="nx">nextProps</span><span class="p">,</span> <span class="nx">nextState</span><span class="p">)</span> <span class="p">{</span>
  <span class="c1">// return true only if a certain condition is met</span>
<span class="p">}</span></code></pre></figure>

<ul>
  <li>Use <a href="https://reactjs.org/docs/react-api.html#reactpurecomponent"><code class="highlighter-rouge">PureComponent</code></a> for class components</li>
</ul>

<figure class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="k">import</span> <span class="nx">React</span><span class="p">,</span> <span class="p">{</span> <span class="nx">PureComponent</span> <span class="p">}</span> <span class="k">from</span> <span class="s1">'react'</span><span class="p">;</span>

<span class="kd">class</span> <span class="nx">AvatarComponent</span> <span class="kd">extends</span> <span class="nx">PureComponent</span> <span class="p">{</span>

<span class="p">}</span></code></pre></figure>

<ul>
  <li>Use <a href="https://reactjs.org/docs/react-api.html#reactmemo"><code class="highlighter-rouge">memo</code></a> for functional components</li>
</ul>

<figure class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="k">import</span> <span class="nx">React</span><span class="p">,</span> <span class="p">{</span> <span class="nx">memo</span> <span class="p">}</span> <span class="k">from</span> <span class="s1">'react'</span><span class="p">;</span>

<span class="kd">const</span> <span class="nx">AvatarComponent</span> <span class="o">=</span> <span class="nx">memo</span><span class="p">(</span><span class="nx">props</span> <span class="o">=&gt;</span> <span class="p">{</span>

<span class="p">});</span></code></pre></figure>

<ul>
  <li>Memoize Redux selectors (with <a href="https://github.com/reduxjs/reselect">reselect</a> for example)</li>
  <li>Virtualize super long lists (with <a href="https://github.com/bvaughn/react-window">react-window</a> for example)</li>
</ul>

<aside>
There are two videos by Brian Vaughn that are worth watching if you would like to learn more about using the Profiler to identify bottlenecks:

<ul>
  <li><a href="https://www.youtube.com/watch?v=nySib7ipZdk">Deep dive with the React DevTools profiler</a></li>
  <li><a href="https://youtu.be/ByBPyMBTzM0?t=1988">Profiling React - React Conf 2018</a></li>
</ul>
</aside>

<h2 id="measure-app-level-performance">Measure app-level performance</h2>

<p>Aside from specific DOM mutations and component re-renders, there are other higher level concerns worth profiling for as well. <a href="https://github.com/GoogleChrome/lighthouse">Lighthouse</a> makes it easy to analyze and assess how a particular site performs.</p>

<p>There are three ways to run Lighthouse tests on a webpage:</p>

<ul>
  <li><a href="https://developers.google.com/web/tools/lighthouse/#cli">Node CLI</a></li>
  <li><a href="https://developers.google.com/web/tools/lighthouse/#extension">Chrome Extension</a></li>
  <li>Directly through Chrome DevTools in the <a href="https://developers.google.com/web/tools/lighthouse/#devtools"><code class="highlighter-rouge">Audits</code></a> panel</li>
</ul>

<p><img alt="Lighthouse in the audits panel" title="Lighthouse in the audits panel" data-src="/assets/progressive-react/lighthouse-audits-panel.png" class="lazyload shadow" /></p>

<p>Lighthouse usually takes a little time gathering all the data it needs from a page and then auditing it against a number of checks. Once that‚Äôs complete, it generates a report with all of the final information.</p>

<p>A number of audits can be used to identify if the amount of JavaScript being shipped to the browser should be reduced:</p>

<ul>
  <li><em>Eliminate render-blocking resources</em></li>
  <li><em>JavaScript boot-up time is too high</em></li>
  <li><em>Avoid enormous network payloads</em></li>
</ul>

<p>If any of these audits fail due to large JavaScript bundles, <strong>splitting</strong> your bundle should be the very first thing that you consider doing. There‚Äôs no reason to load more code than necessary if there is a way split things up.</p>

<h3 id="split-your-bundle">Split your bundle</h3>

<p>One way to code-split is to use <strong>dynamic imports</strong>:</p>

<pre>
  <code class="language-javascript hljs" data-lang="javascript">
  <strong>import('lodash.sortby')</strong>
    .then(module =&gt; module.default)
    .then(module =&gt; doSomethingCool(module))
  </code>
</pre>

<p>The import syntax may look like a function call, but it allows you to import any module asynchronously where a promise gets returned. In this example, the <code class="highlighter-rouge">sortby</code> method from <code class="highlighter-rouge">lodash</code> is imported where <code class="highlighter-rouge">doSomethingCool</code> is then fired.</p>

<video class="shadow" autoplay="" loop="" muted="" playsinline="">
  <source src="/assets/progressive-react/magic-sorter.mp4" type="video/mp4" />
  <source src="/assets/progressive-react/magic-sorter.ogg" type="video/ogg" />
</video>

<p>In this visualization:</p>

<ol>
  <li>User clicks a button to sort three numbers</li>
  <li><code class="highlighter-rouge">lodash.sortby</code> is imported</li>
  <li><code class="highlighter-rouge">doSomethingCool</code> method is fired which sorts the numbers and displays it in a new DOM node</li>
</ol>

<p>Now this is a super contrived example, because you would probably just use <code class="highlighter-rouge">Array.prototype.sort()</code> if you really needed to sort numbers on a page. Hopefully it demonstrates why using dynamic imports on <em>specific user actions</em> can be useful.</p>

<p>Dynamic imports are a relatively new syntax and are currently in <a href="https://github.com/tc39/proposal-dynamic-import">stage 3</a> of the TC39 process. The syntax is already supported in <a href="https://caniuse.com/#search=dynamic%20import">Chrome and Safari</a> as well as module bundlers like <a href="https://webpack.js.org/guides/code-splitting/#dynamic-imports">Webpack</a>, <a href="https://rollupjs.org/guide/en#code-splitting">Rollup</a> and <a href="https://parceljs.org/code_splitting.html">Parcel</a>.</p>

<p>In the context of React, abstractions have been built to make the process of splitting on the component-level while using dynamic imports even easier. <code class="highlighter-rouge">React.lazy</code> is one example:</p>

<figure class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="k">import</span> <span class="nx">React</span><span class="p">,</span> <span class="p">{</span> <span class="nx">lazy</span> <span class="p">}</span> <span class="k">from</span> <span class="s1">'react'</span><span class="p">;</span>

<span class="kd">const</span> <span class="nx">AvatarComponent</span> <span class="o">=</span> <span class="nx">lazy</span><span class="p">(()</span> <span class="o">=&gt;</span> <span class="k">import</span><span class="p">(</span><span class="s1">'./AvatarComponent'</span><span class="p">));</span></code></pre></figure>

<p>One of the main concerns of loading different parts of an application asynchronously is handling the delay that a user can experience. For this, the <code class="highlighter-rouge">Suspense</code> component can be used to ‚Äúsuspend‚Äù a certain component tree from rendering. By using it alongside <code class="highlighter-rouge">React.lazy</code>, a loading indicator can be shown as a fallback while a component is still being fetched:</p>

<figure class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="k">import</span> <span class="nx">React</span><span class="p">,</span> <span class="p">{</span> <span class="nx">lazy</span><span class="p">,</span> <span class="nx">Suspense</span> <span class="p">}</span> <span class="k">from</span> <span class="s1">'react'</span><span class="p">;</span>
<span class="k">import</span> <span class="nx">LoadingComponent</span> <span class="k">from</span> <span class="s1">'./LoadingComponent'</span><span class="p">;</span>

<span class="kd">const</span> <span class="nx">AvatarComponent</span> <span class="o">=</span> <span class="nx">lazy</span><span class="p">(()</span> <span class="o">=&gt;</span> <span class="k">import</span><span class="p">(</span><span class="s1">'./AvatarComponent'</span><span class="p">));</span>

<span class="kd">const</span> <span class="nx">PageComponent</span> <span class="o">=</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">(</span>
  <span class="o">&lt;</span><span class="nx">Suspense</span> <span class="nx">fallback</span><span class="o">=</span><span class="p">{</span><span class="nx">LoadingComponent</span><span class="p">}</span><span class="o">&gt;</span>
    <span class="o">&lt;</span><span class="nx">SomeComponent</span> <span class="o">/&gt;</span>
  <span class="o">&lt;</span><span class="sr">/Suspense</span><span class="err">&gt;
</span><span class="p">)</span></code></pre></figure>

<p>Suspense does not yet work if your views are rendered on the server. If you would like to code-split in a server-side rendered React app, use a library like <code class="highlighter-rouge">loadable-components</code> as suggested in the React docs.</p>

<figure class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="k">import</span> <span class="nx">React</span> <span class="k">from</span> <span class="s1">'react'</span><span class="p">;</span>
<span class="k">import</span> <span class="nx">loadable</span> <span class="k">from</span> <span class="s1">'@loadable/component'</span>
<span class="k">import</span> <span class="nx">LoadingComponent</span> <span class="k">from</span> <span class="s1">'./LoadingComponent'</span><span class="p">;</span>

<span class="kd">const</span> <span class="nx">AvatarComponent</span> <span class="o">=</span> 
  <span class="nx">loadable</span><span class="p">(()</span> <span class="o">=&gt;</span> <span class="k">import</span><span class="p">(</span><span class="s1">'./AvatarComponent'</span><span class="p">),</span> <span class="p">{</span>
    <span class="na">LoadingComponent</span><span class="p">:</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="nx">LoadingComponent</span>
  <span class="p">});</span></code></pre></figure>

<p>Loading components can also be used as indicators with <code class="highlighter-rouge">loadable-component</code> while the main component is still being fetched.</p>

<aside>
<p>There are a <a href="https://www.smooth-code.com/open-source/loadable-components/docs/server-side-rendering/">few things</a> you'll need to set up in order to make <code>loadable-components</code> work with SSR.</p>
</aside>

<aside>
<h4>Where should one begin code splitting?</h4>
<p>The easiest way to start is at the <strong>route-level</strong>. The React <a href="https://reactjs.org/docs/code-splitting.html#route-based-code-splitting">docs</a> explain how this can work using React Router and Suspense.</p>
</aside>

<h4 id="code-split-on-scroll">Code-split on scroll?</h4>

<p>Another handy library that provides a wrapper around <code class="highlighter-rouge">loadable-components</code> and Intersection Observer is <a href="https://github.com/stratiformltd/react-loadable-visibility"><code class="highlighter-rouge">react-loadable-visibility</code></a>. You can use it to load components as they become visible within the device viewport when the user scrolls the page.</p>

<figure class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="k">import</span> <span class="nx">React</span> <span class="k">from</span> <span class="s1">'react'</span><span class="p">;</span>
<span class="k">import</span> <span class="nx">loadableVisibility</span> <span class="k">from</span> <span class="s1">'react-loadable-visibility/loadable-components'</span>

<span class="kd">const</span> <span class="nx">AvatarComponent</span> <span class="o">=</span> <span class="nx">loadableVisibility</span><span class="p">(()</span> <span class="o">=&gt;</span> <span class="k">import</span><span class="p">(</span><span class="s1">'./AvatarComponent'</span><span class="p">),</span> <span class="p">{</span>
  <span class="na">LoadingComponent</span><span class="p">:</span> <span class="nx">Loading</span><span class="p">,</span>
<span class="p">})</span></code></pre></figure>

<h3 id="cache-things-worth-caching">Cache things worth caching</h3>

<p>A <strong>service worker</strong> is a web worker that runs in the background of your browser when you view a webpage.</p>

<p>The idea behind service workers is to include specific functionality on a separate thread that can improve the user experience. This includes caching important files so that when your users make a repeat visit, the browser can make a request to the service worker instead of all the way to the server which improves how fast the page loads on repeat visits.</p>

<video class="shadow" autoplay="" loop="" muted="" playsinline="">
  <source src="/assets/progressive-react/service-worker-vid.mp4" type="video/mp4" />
  <source src="/assets/progressive-react/service-worker-vid.ogg" type="video/ogg" />
</video>

<p><a href="https://developers.google.com/web/tools/workbox/">Workbox</a> is a set of libraries that can make it easier to include service workers without actually writing one from scratch. With CRA 2.0, you only need to remove 2 characters in <code class="highlighter-rouge">src/index.js</code> to have a workbox-powered service worker up and running with basic caching functionality.</p>

<pre>
  <code class="language-javascript hljs" data-lang="javascript">
  import React from 'react';
  
  //...

  // If you want your app to work offline and load faster, you can change
  // unregister() to register() below. Note this comes with some pitfalls.
  // Learn more about service workers: http://bit.ly/CRA-PWA
  serviceWorker.<strong><s>un</s></strong>register();
  </code>
</pre>

<aside>
For a more detailed breakdown of service workers and the Workbox library, refer to my <a href="https://houssein.me/thinking-prpl#service-workers">previous article</a>.
</aside>

<h3 id="streaming-ssr">Streaming SSR</h3>

<p>The basic idea of server-side rendering on a mainly client-rendered application involves shipping down an HTML document from the server that the client would have eventually produced. This allows you to display content to the user much sooner than them waiting for the JS bundle to finish executing.</p>

<p>To make sure this works well, you need to ensure that the browser re-uses the server-rendered DOM instead of re-creating the markup (with <a href="https://reactjs.org/docs/react-dom.html#hydrate"><code class="highlighter-rouge">hydrate()</code></a> for example in React). This makes things <em>seem</em> like a page has loaded faster, but it can delay the time it takes for it to become interactive.</p>

<p>With React 16, you can take advantage of <strong>streaming</strong> while server-side rendering your components. Instead of using <code class="highlighter-rouge">renderToString</code> to return an HTML string, you can use <code class="highlighter-rouge">renderToNodeStream</code> to return a Node <code class="highlighter-rouge">Readable</code> stream of bytes. Streaming from a server allows a client to receive and hydrate different parts of the HTML document instead of all at once. Although SSR should always improve First Paint times in your application, this would reduce that number even further.</p>

<aside>
If you're using React to build a static site, use <a href="https://reactjs.org/docs/react-dom-server.html#rendertostaticnodestream"><code>renderToStaticNodeStream</code></a> instead.
</aside>

<h4 id="cant-ssr-pre-render-instead">Can‚Äôt SSR? Pre-render instead</h4>

<p>The definition of SSR is a little blurry since there are many different ways servers can ship some, instead of all, the static content needed for a specific URL and how a client can hydrate it. <strong>Prerendering</strong>, or static rendering, is a middle-ground between entirely server-side rendering pages on the fly and pure client-side rendering. This approach usually involves generating HTML pages for every route during <em>build time</em> and serving that to the user while a JavaScript bundle finishes compiling.</p>

<p>If you would like to introduce pre-rendering into your application, libraries like <a href="https://github.com/stereobooster/react-snap"><code class="highlighter-rouge">react-snap</code></a> that take advantage of <a href="https://github.com/GoogleChrome/puppeteer">Puppeteer</a> can make things easier for you.</p>

<aside>
Jason Miller and Addy Osmani have a great article that covers the different ways you can server-side render content to your users: <a href="https://developers.google.com/web/updates/2019/02/rendering-on-the-web">Rendering on the Web</a>.
</aside>

<h3 id="extract-critical-css-in-js-styles">Extract critical CSS-in-JS styles</h3>

<p>Many developers in the React community use CSS-in-JS libraries like <a href="https://emotion.sh/">emotion</a> and <a href="https://www.styled-components.com/">styled-components</a> for a multitude of reasons (component-scoped styles, automatically generated selectors adjusted properties based on props, etc‚Ä¶). If you‚Äôre not entirely careful, you can run into the issue of having all the styles being computed at runtime. This means that the styles only get applied when the JavaScript bundle finishes executing which can trigger a flash of unstyled content. Like most performance concerns, this gets exemplified if your user happens to have a weaker mobile device or poorer network connection.</p>

<p><img alt="Flash of unstyled content" title="Flash of unstyled content" data-src="/assets/progressive-react/runtime-cost-styled.png" class="lazyload shadow" /></p>

<p class="image-source">Screenshot from <a href="https://github.com/denar90">denar90</a></p>

<p>If you‚Äôve already incorporated some sort of server-side rendering into your application, you can fix this by extracting critical styles. Both <a href="https://emotion.sh/docs/ssr"><code class="highlighter-rouge">emotion</code></a> and <a href="https://medium.com/styled-components/v3-1-0-such-perf-wow-many-streams-c45c434dbd03#35df"><code class="highlighter-rouge">styled-components</code></a> support this out of the box where you can extract your styles into a <code class="highlighter-rouge">Readable</code> node stream. Glamor has a separate <a href="https://github.com/threepointone/glamor-stream">library</a> that allows you to do the same thing as well.</p>

<p>Extracting critical styles can improve things quite substantially for users with weaker devices or network connections:</p>

<video class="shadow" autoplay="" loop="" muted="" playsinline="">
  <source src="/assets/progressive-react/css-in-js-updates.mp4" type="video/mp4" />
  <source src="/assets/progressive-react/css-in-js-updates.ogg" type="video/ogg" />
</video>

<p class="image-source">This is actually a Preact app, but you get the idea :) (optimizations by <a href="https://github.com/GoogleChromeLabs/progressive-tooling/pull/26">denar90</a>)</p>

<aside>
If you just want component-scoped styles without any of the overhead that a CSS-in-JS library might add to your application, consider using a library like <a href="https://github.com/4Catalyzer/astroturf">astroturf</a>. You may not get all the features that you would get in a typical CSS-in-JS library, but you still get the benefits of controllable, component-scoped styles without any runtime cost.
</aside>

<h3 id="make-things-accessible">Make things accessible</h3>

<p>The term ‚Äúprogressive‚Äù usually means that an attempt was made to ensure that <strong>all</strong> users have the opportunity to access at least some content of the site, if not all of it. If you don‚Äôt ensure that your site is accessible to users with a disability, it is not progressive.</p>

<p>Lighthouse is a good first step to identify any accessibility concerns on a web page. To find issues that are more specific to React elements, <a href="https://github.com/reactjs/react-a11y"><code class="highlighter-rouge">React A11y</code></a> can help.</p>

<p>You can also consider using <a href="https://github.com/dequelabs/react-axe">react-axe</a> to audit the final, rendered DOM instead of just the JSX in your application.</p>

<h3 id="improve-the-experience-when-users-install-the-site-to-their-home-screen">Improve the experience when users install the site to their home screen</h3>

<p>Does your React site work well on mobile? Do you have a service worker that caches some content so that it works offline? Is your application useful enough that you think people would like to access it on their device homescreen?</p>

<p>If you answered <em>yes</em> to all these questions, add a <a href="https://developers.google.com/web/fundamentals/web-app-manifest/">web app manifest</a> to your site so that your users can get a better mobile experience when it‚Äôs ‚Äúinstalled‚Äù on their device. This lets you change a number of settings including the app icon, background color and theme color.</p>

<p>Create React App already sets up a default manifest for you when you create a new app:</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>{
  "short_name": "React App",
  "name": "Create React App Sample",
  "icons": [
    {
      "src": "favicon.ico",
      "sizes": "64x64 32x32 24x24 16x16",
      "type": "image/x-icon"
    }
  ],
  "start_url": ".",
  "display": "standalone",
  "theme_color": "#000000",
  "background_color": "#ffffff"
}
</code></pre></div></div>

<h3 id="miscellaneous">Miscellaneous</h3>

<p>The new few sections will cover techniques commonly used to only improve developer experience but also have the advantage of minimizing the amount of code written.</p>

<p>Why is this useful? Less code = less bytes shipped = faster web page.</p>

<h4 id="atomic-css">Atomic CSS</h4>

<p>The idea behind Atomic styling is to define <strong>single-use</strong> classes that are focused, small and identifiable. For example, a single class would be used to add a blue background to a button:</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>&lt;button class="bg-blue"&gt;Click Me&lt;/button&gt;
</code></pre></div></div>

<p>A separate class would be responsible for giving it a specific amount of padding:</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>&lt;button class="bg-blue pa2"&gt;Click Me&lt;/button&gt;
</code></pre></div></div>

<p>And so on. Although this would add <em>a lot</em> more values to the <code class="highlighter-rouge">class</code> attribute for most of your DOM nodes, you get the added benefit of not writing nearly as much CSS as you normally would if you use a library that sets up all the selectors for you. <a href="https://tachyons.io/">Tachyons</a> is one example of such a library.</p>

<p>Scoping styles to components using atomic utility classes has become a common styling pattern for many developers. Libraries such as <a href="https://github.com/jxnblk/tachyons-components">tachyons-components</a> even let you apply these styles using a <code class="highlighter-rouge">styled-components</code> like API:</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>import styled from 'tachyons-components'

const Button = styled('button')`
  bg-blue pa2
`

&lt;Button&gt;Click Me&lt;/Button&gt;
</code></pre></div></div>

<p>Although it may not be the primary reason why developers use atomic utility libraries like, removing the need to create new CSS selectors by relying entirely on a fixed set of single-use classes means that the amount of CSS shipped to the browser never changes.</p>

<h4 id="hooks">Hooks</h4>

<p>Hooks allow you to do a bunch of things with functional (no-class) components that you could have only previously done with <code class="highlighter-rouge">class</code> components. Including state is one example:</p>

<figure class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="k">import</span> <span class="p">{</span> <span class="nx">useState</span> <span class="p">}</span> <span class="k">from</span> <span class="s1">'react'</span><span class="p">;</span>

<span class="kd">function</span> <span class="nx">AvatarComponent</span><span class="p">()</span> <span class="p">{</span>
  <span class="kd">const</span> <span class="p">[</span><span class="nx">name</span><span class="p">,</span> <span class="nx">setName</span><span class="p">]</span> <span class="o">=</span> <span class="nx">useState</span><span class="p">(</span><span class="s1">'Houssein'</span><span class="p">);</span>

  <span class="k">return</span> <span class="p">(</span>
    <span class="o">&lt;</span><span class="nx">React</span><span class="p">.</span><span class="nx">Fragment</span><span class="o">&gt;</span>
      <span class="o">&lt;</span><span class="nx">div</span><span class="o">&gt;</span>
        <span class="o">&lt;</span><span class="nx">p</span><span class="o">&gt;</span><span class="nx">This</span> <span class="nx">is</span> <span class="nx">a</span> <span class="nx">picture</span> <span class="k">of</span> <span class="p">{</span><span class="nx">name</span><span class="p">}</span><span class="o">&lt;</span><span class="sr">/p</span><span class="err">&gt;
</span>        <span class="o">&lt;</span><span class="nx">img</span> <span class="nx">src</span><span class="o">=</span><span class="s2">"avatar.png"</span> <span class="o">/&gt;</span>
      <span class="o">&lt;</span><span class="sr">/div</span><span class="err">&gt;
</span>
      <span class="o">&lt;</span><span class="nx">button</span> <span class="nx">onClick</span><span class="o">=</span><span class="p">{()</span> <span class="o">=&gt;</span> <span class="nx">setName</span><span class="p">(</span><span class="s1">'a banana'</span><span class="p">)}</span><span class="o">&gt;</span>
        <span class="nx">Fix</span> <span class="nx">name</span>
      <span class="o">&lt;</span><span class="sr">/button</span><span class="err">&gt;
</span>    <span class="o">&lt;</span><span class="sr">/React.Fragment</span><span class="err">&gt;
</span>  <span class="p">);</span>
<span class="p">}</span></code></pre></figure>

<p>Hooks can be useful for:</p>

<ul>
  <li>Including state into a component without using a <code class="highlighter-rouge">class</code> (<a href="https://reactjs.org/docs/hooks-state.html"><code class="highlighter-rouge">useState</code></a>)</li>
  <li>Including side effects without using a <code class="highlighter-rouge">class</code> (<a href="https://reactjs.org/docs/hooks-effect.html"><code class="highlighter-rouge">useEffect</code></a>)</li>
  <li>Re-using logic between components by creating your own hooks.</li>
</ul>

<p>This all lets you incorporate logic into your components in such a way that it can be reused in other places of your application. Prior to hooks, <a href="https://github.com/acdlite/recompose">recompose</a> was commonly used to get some of these capabilities.</p>

<aside>
  The opening keynote and first few talks at React Conf explain the concept of <a href="https://www.youtube.com/watch?v=dpw9EHDh2bM">Hooks</a> in detail.
</aside>

<p>Although most developers will decide to use Hooks to improve the experience of tying logic into their components, it can also help cut down bundle sizes.</p>

<blockquote>
  <p>In terms of the implementation size, the Hooks support increases React only by ~1.5kB (min+gzip). While this isn‚Äôt much, it‚Äôs also likely that adopting Hooks could reduce your bundle size because code using Hooks tends to <strong>minify better than equivalent code using classes</strong>.</p>
  <footer><a href="https://dev.to/dan_abramov/making-sense-of-react-hooks-2eib">Making Sense of React Hooks</a></footer>
</blockquote>

<h3 id="conclusion">Conclusion</h3>

<p>When a open-source tool, like React, ends up being used by so many developers - it‚Äôs natural to expect two things:</p>

<ul>
  <li>Improved APIs within the tool to make building applications easier</li>
  <li>New third-party libraries built by the community that help make building applications easier</li>
</ul>

<p>‚Äú‚Ä¶make building applications easier‚Äù can mean a lot of things, and shipping apps that load faster with less effort is just a part of it.</p>


    </div>

    <div class="f5 fw6 lh-copy mt5">
      <p>If you have any questions or suggestions, feel free to open an
        <a class="link-effect" href="https://github.com/housseindjirdeh/housseindjirdeh.github.io/issues/new">issue!</a>
      </p>
    </div>

    <div class="flex flex-column items-center mt6 mt7-ns mb5">
	<p class="grow">
		<a class="f4 fw6 link near-black hover-red ttl" href="https://twitter.com/hdjirdeh" rel="noopener noreferrer" target="_blank">
			Houssein Djirdeh
		</a>
	</p>
</div>
  </div>
  
  <script>
  /*! highlight.js v9.12.0 | BSD3 License | git.io/hljslicense */
  !function(e){var t="object"==typeof window&&window||"object"==typeof self&&self;"undefined"!=typeof exports?e(exports):t&&(t.hljs=e({}),"function"==typeof define&&define.amd&&define([],function(){return t.hljs}))}(function(e){function t(e){return e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}function r(e){return e.nodeName.toLowerCase()}function n(e,t){var r=e&&e.exec(t);return r&&0===r.index}function a(e){return v.test(e)}function c(e){var t,r={},n=Array.prototype.slice.call(arguments,1);for(t in e)r[t]=e[t];return n.forEach(function(e){for(t in e)r[t]=e[t]}),r}function i(e){var t=[];return function e(n,a){for(var c=n.firstChild;c;c=c.nextSibling)3===c.nodeType?a+=c.nodeValue.length:1===c.nodeType&&(t.push({event:"start",offset:a,node:c}),a=e(c,a),r(c).match(/br|hr|img|input/)||t.push({event:"stop",offset:a,node:c}));return a}(e,0),t}function s(e){function t(e){return e&&e.source||e}function r(r,n){return new RegExp(t(r),"m"+(e.cI?"i":"")+(n?"g":""))}!function n(a,i){if(!a.compiled){if(a.compiled=!0,a.k=a.k||a.bK,a.k){var s={},o=function(t,r){e.cI&&(r=r.toLowerCase()),r.split(" ").forEach(function(e){var r=e.split("|");s[r[0]]=[t,r[1]?Number(r[1]):1]})};"string"==typeof a.k?o("keyword",a.k):d(a.k).forEach(function(e){o(e,a.k[e])}),a.k=s}a.lR=r(a.l||/\w+/,!0),i&&(a.bK&&(a.b="\\b("+a.bK.split(" ").join("|")+")\\b"),a.b||(a.b=/\B|\b/),a.bR=r(a.b),a.e||a.eW||(a.e=/\B|\b/),a.e&&(a.eR=r(a.e)),a.tE=t(a.e)||"",a.eW&&i.tE&&(a.tE+=(a.e?"|":"")+i.tE)),a.i&&(a.iR=r(a.i)),null==a.r&&(a.r=1),a.c||(a.c=[]),a.c=Array.prototype.concat.apply([],a.c.map(function(e){return(t="self"===e?a:e).v&&!t.cached_variants&&(t.cached_variants=t.v.map(function(e){return c(t,{v:null},e)})),t.cached_variants||t.eW&&[c(t)]||[t];var t})),a.c.forEach(function(e){n(e,a)}),a.starts&&n(a.starts,i);var l=a.c.map(function(e){return e.bK?"\\.?("+e.b+")\\.?":e.b}).concat([a.tE,a.i]).map(t).filter(Boolean);a.t=l.length?r(l.join("|"),!0):{exec:function(){return null}}}}(e)}function o(e,r,a,c){function i(e,t,r,n){var a='<span class="'+(n?"":E.classPrefix);return(a+=e+'">')+t+(r?"":y)}function u(){N+=null!=m.sL?function(){var e="string"==typeof m.sL;if(e&&!h[m.sL])return t(w);var r=e?o(m.sL,w,!0,v[m.sL]):l(w,m.sL.length?m.sL:void 0);return m.r>0&&(M+=r.r),e&&(v[m.sL]=r.top),i(r.language,r.value,!1,!0)}():function(){var e,r,n,a,c,s,o;if(!m.k)return t(w);for(a="",r=0,m.lR.lastIndex=0,n=m.lR.exec(w);n;)a+=t(w.substring(r,n.index)),c=m,s=n,o=g.cI?s[0].toLowerCase():s[0],e=c.k.hasOwnProperty(o)&&c.k[o],e?(M+=e[1],a+=i(e[0],t(n[0]))):a+=t(n[0]),r=m.lR.lastIndex,n=m.lR.exec(w);return a+t(w.substr(r))}(),w=""}function f(e){N+=e.cN?i(e.cN,"",!0):"",m=Object.create(e,{parent:{value:m}})}function b(e,t){if(w+=e,null==t)return u(),0;var r=function(e,t){var r,a;for(r=0,a=t.c.length;a>r;r++)if(n(t.c[r].bR,e))return t.c[r]}(t,m);if(r)return r.skip?w+=t:(r.eB&&(w+=t),u(),r.rB||r.eB||(w=t)),f(r),r.rB?0:t.length;var c,i=function e(t,r){if(n(t.eR,r)){for(;t.endsParent&&t.parent;)t=t.parent;return t}return t.eW?e(t.parent,r):void 0}(m,t);if(i){var s=m;s.skip?w+=t:(s.rE||s.eE||(w+=t),u(),s.eE&&(w=t));do{m.cN&&(N+=y),m.skip||(M+=m.r),m=m.parent}while(m!==i.parent);return i.starts&&f(i.starts),s.rE?0:t.length}if(c=t,!a&&n(m.iR,c))throw new Error('Illegal lexeme "'+t+'" for mode "'+(m.cN||"<unnamed>")+'"');return w+=t,t.length||1}var g=p(e);if(!g)throw new Error('Unknown language: "'+e+'"');s(g);var d,m=c||g,v={},N="";for(d=m;d!==g;d=d.parent)d.cN&&(N=i(d.cN,"",!0)+N);var w="",M=0;try{for(var x,R,C=0;m.t.lastIndex=C,x=m.t.exec(r);)R=b(r.substring(C,x.index),x[0]),C=x.index+R;for(b(r.substr(C)),d=m;d.parent;d=d.parent)d.cN&&(N+=y);return{r:M,value:N,language:e,top:m}}catch(e){if(e.message&&-1!==e.message.indexOf("Illegal"))return{r:0,value:t(r)};throw e}}function l(e,r){r=r||E.languages||d(h);var n={r:0,value:t(e)},a=n;return r.filter(p).forEach(function(t){var r=o(t,e,!1);r.language=t,r.r>a.r&&(a=r),r.r>n.r&&(a=n,n=r)}),a.language&&(n.second_best=a),n}function u(e){return E.tabReplace||E.useBR?e.replace(w,function(e,t){return E.useBR&&"\n"===e?"<br>":E.tabReplace?t.replace(/\t/g,E.tabReplace):""}):e}function f(e){var n,c,s,f,b,d,h,v,w,y,M=function(e){var t,r,n,c,i=e.className+" ";if(i+=e.parentNode?e.parentNode.className:"",r=N.exec(i))return p(r[1])?r[1]:"no-highlight";for(t=0,n=(i=i.split(/\s+/)).length;n>t;t++)if(c=i[t],a(c)||p(c))return c}(e);a(M)||(E.useBR?(n=document.createElementNS("http://www.w3.org/1999/xhtml","div")).innerHTML=e.innerHTML.replace(/\n/g,"").replace(/<br[ \/]*>/g,"\n"):n=e,b=n.textContent,s=M?o(M,b,!0):l(b),(c=i(n)).length&&((f=document.createElementNS("http://www.w3.org/1999/xhtml","div")).innerHTML=s.value,s.value=function(e,n,a){function c(){return e.length&&n.length?e[0].offset!==n[0].offset?e[0].offset<n[0].offset?e:n:"start"===n[0].event?e:n:e.length?e:n}function i(e){u+="<"+r(e)+g.map.call(e.attributes,function(e){return" "+e.nodeName+'="'+t(e.value).replace('"',"&quot;")+'"'}).join("")+">"}function s(e){u+="</"+r(e)+">"}function o(e){("start"===e.event?i:s)(e.node)}for(var l=0,u="",f=[];e.length||n.length;){var b=c();if(u+=t(a.substring(l,b[0].offset)),l=b[0].offset,b===e){f.reverse().forEach(s);do{o(b.splice(0,1)[0]),b=c()}while(b===e&&b.length&&b[0].offset===l);f.reverse().forEach(i)}else"start"===b[0].event?f.push(b[0].node):f.pop(),o(b.splice(0,1)[0])}return u+t(a.substr(l))}(c,i(f),b)),s.value=u(s.value),e.innerHTML=s.value,e.className=(d=e.className,h=M,v=s.language,w=h?m[h]:v,y=[d.trim()],d.match(/\bhljs\b/)||y.push("hljs"),-1===d.indexOf(w)&&y.push(w),y.join(" ").trim()),e.result={language:s.language,re:s.r},s.second_best&&(e.second_best={language:s.second_best.language,re:s.second_best.r}))}function b(){if(!b.called){b.called=!0;var e=document.querySelectorAll("pre code");g.forEach.call(e,f)}}function p(e){return e=(e||"").toLowerCase(),h[e]||h[m[e]]}var g=[],d=Object.keys,h={},m={},v=/^(no-?highlight|plain|text)$/i,N=/\blang(?:uage)?-([\w-]+)\b/i,w=/((^(<[^>]+>|\t|)+|(?:\n)))/gm,y="</span>",E={classPrefix:"hljs-",tabReplace:null,useBR:!1,languages:void 0};return e.highlight=o,e.highlightAuto=l,e.fixMarkup=u,e.highlightBlock=f,e.configure=function(e){E=c(E,e)},e.initHighlighting=b,e.initHighlightingOnLoad=function(){addEventListener("DOMContentLoaded",b,!1),addEventListener("load",b,!1)},e.registerLanguage=function(t,r){var n=h[t]=r(e);n.aliases&&n.aliases.forEach(function(e){m[e]=t})},e.listLanguages=function(){return d(h)},e.getLanguage=p,e.inherit=c,e.IR="[a-zA-Z]\\w*",e.UIR="[a-zA-Z_]\\w*",e.NR="\\b\\d+(\\.\\d+)?",e.CNR="(-?)(\\b0[xX][a-fA-F0-9]+|(\\b\\d+(\\.\\d*)?|\\.\\d+)([eE][-+]?\\d+)?)",e.BNR="\\b(0b[01]+)",e.RSR="!|!=|!==|%|%=|&|&&|&=|\\*|\\*=|\\+|\\+=|,|-|-=|/=|/|:|;|<<|<<=|<=|<|===|==|=|>>>=|>>=|>=|>>>|>>|>|\\?|\\[|\\{|\\(|\\^|\\^=|\\||\\|=|\\|\\||~",e.BE={b:"\\\\[\\s\\S]",r:0},e.ASM={cN:"string",b:"'",e:"'",i:"\\n",c:[e.BE]},e.QSM={cN:"string",b:'"',e:'"',i:"\\n",c:[e.BE]},e.PWM={b:/\b(a|an|the|are|I'm|isn't|don't|doesn't|won't|but|just|should|pretty|simply|enough|gonna|going|wtf|so|such|will|you|your|they|like|more)\b/},e.C=function(t,r,n){var a=e.inherit({cN:"comment",b:t,e:r,c:[]},n||{});return a.c.push(e.PWM),a.c.push({cN:"doctag",b:"(?:TODO|FIXME|NOTE|BUG|XXX):",r:0}),a},e.CLCM=e.C("//","$"),e.CBCM=e.C("/\\*","\\*/"),e.HCM=e.C("#","$"),e.NM={cN:"number",b:e.NR,r:0},e.CNM={cN:"number",b:e.CNR,r:0},e.BNM={cN:"number",b:e.BNR,r:0},e.CSSNM={cN:"number",b:e.NR+"(%|em|ex|ch|rem|vw|vh|vmin|vmax|cm|mm|in|pt|pc|px|deg|grad|rad|turn|s|ms|Hz|kHz|dpi|dpcm|dppx)?",r:0},e.RM={cN:"regexp",b:/\//,e:/\/[gimuy]*/,i:/\n/,c:[e.BE,{b:/\[/,e:/\]/,r:0,c:[e.BE]}]},e.TM={cN:"title",b:e.IR,r:0},e.UTM={cN:"title",b:e.UIR,r:0},e.METHOD_GUARD={b:"\\.\\s*"+e.UIR,r:0},e}),hljs.registerLanguage("css",function(e){var t={b:/[A-Z\_\.\-]+\s*:/,rB:!0,e:";",eW:!0,c:[{cN:"attribute",b:/\S/,e:":",eE:!0,starts:{eW:!0,eE:!0,c:[{b:/[\w-]+\(/,rB:!0,c:[{cN:"built_in",b:/[\w-]+/},{b:/\(/,e:/\)/,c:[e.ASM,e.QSM]}]},e.CSSNM,e.QSM,e.ASM,e.CBCM,{cN:"number",b:"#[0-9A-Fa-f]+"},{cN:"meta",b:"!important"}]}}]};return{cI:!0,i:/[=\/|'\$]/,c:[e.CBCM,{cN:"selector-id",b:/#[A-Za-z0-9_-]+/},{cN:"selector-class",b:/\.[A-Za-z0-9_-]+/},{cN:"selector-attr",b:/\[/,e:/\]/,i:"$"},{cN:"selector-pseudo",b:/:(:)?[a-zA-Z0-9\_\-\+\(\)"'.]+/},{b:"@(font-face|page)",l:"[a-z-]+",k:"font-face page"},{b:"@",e:"[{;]",i:/:/,c:[{cN:"keyword",b:/\w+/},{b:/\s/,eW:!0,eE:!0,r:0,c:[e.ASM,e.QSM,e.CSSNM]}]},{cN:"selector-tag",b:"[a-zA-Z-][a-zA-Z0-9_-]*",r:0},{b:"{",e:"}",i:/\S/,c:[e.CBCM,t]}]}}),hljs.registerLanguage("bash",function(e){var t={cN:"variable",v:[{b:/\$[\w\d#@][\w\d_]*/},{b:/\$\{(.*?)}/}]},r={cN:"string",b:/"/,e:/"/,c:[e.BE,t,{cN:"variable",b:/\$\(/,e:/\)/,c:[e.BE]}]};return{aliases:["sh","zsh"],l:/\b-?[a-z\._]+\b/,k:{keyword:"if then else elif fi for while in do done case esac function",literal:"true false",built_in:"break cd continue eval exec exit export getopts hash pwd readonly return shift test times trap umask unset alias bind builtin caller command declare echo enable help let local logout mapfile printf read readarray source type typeset ulimit unalias set shopt autoload bg bindkey bye cap chdir clone comparguments compcall compctl compdescribe compfiles compgroups compquote comptags comptry compvalues dirs disable disown echotc echoti emulate fc fg float functions getcap getln history integer jobs kill limit log noglob popd print pushd pushln rehash sched setcap setopt stat suspend ttyctl unfunction unhash unlimit unsetopt vared wait whence where which zcompile zformat zftp zle zmodload zparseopts zprof zpty zregexparse zsocket zstyle ztcp",_:"-ne -eq -lt -gt -f -d -e -s -l -a"},c:[{cN:"meta",b:/^#![^\n]+sh\s*$/,r:10},{cN:"function",b:/\w[\w\d_]*\s*\(\s*\)\s*\{/,rB:!0,c:[e.inherit(e.TM,{b:/\w[\w\d_]*/})],r:0},e.HCM,r,{cN:"string",b:/'/,e:/'/},t]}}),hljs.registerLanguage("xml",function(e){var t={eW:!0,i:/</,r:0,c:[{cN:"attr",b:"[A-Za-z0-9\\._:-]+",r:0},{b:/=\s*/,r:0,c:[{cN:"string",endsParent:!0,v:[{b:/"/,e:/"/},{b:/'/,e:/'/},{b:/[^\s"'=<>`]+/}]}]}]};return{aliases:["html","xhtml","rss","atom","xjb","xsd","xsl","plist"],cI:!0,c:[{cN:"meta",b:"<!DOCTYPE",e:">",r:10,c:[{b:"\\[",e:"\\]"}]},e.C("\x3c!--","--\x3e",{r:10}),{b:"<\\!\\[CDATA\\[",e:"\\]\\]>",r:10},{b:/<\?(php)?/,e:/\?>/,sL:"php",c:[{b:"/\\*",e:"\\*/",skip:!0}]},{cN:"tag",b:"<style(?=\\s|>|$)",e:">",k:{name:"style"},c:[t],starts:{e:"</style>",rE:!0,sL:["css","xml"]}},{cN:"tag",b:"<script(?=\\s|>|$)",e:">",k:{name:"script"},c:[t],starts:{e:"<\/script>",rE:!0,sL:["actionscript","javascript","handlebars","xml"]}},{cN:"meta",v:[{b:/<\?xml/,e:/\?>/,r:10},{b:/<\?\w+/,e:/\?>/}]},{cN:"tag",b:"</?",e:"/?>",c:[{cN:"name",b:/[^\/><\s]+/,r:0},t]}]}}),hljs.registerLanguage("json",function(e){var t={literal:"true false null"},r=[e.QSM,e.CNM],n={e:",",eW:!0,eE:!0,c:r,k:t},a={b:"{",e:"}",c:[{cN:"attr",b:/"/,e:/"/,c:[e.BE],i:"\\n"},e.inherit(n,{b:/:/})],i:"\\S"},c={b:"\\[",e:"\\]",c:[e.inherit(n)],i:"\\S"};return r.splice(r.length,0,a,c),{c:r,k:t,i:"\\S"}}),hljs.registerLanguage("javascript",function(e){var t="[A-Za-z$_][0-9A-Za-z$_]*",r={keyword:"in of if for while finally var new function do return void else break catch instanceof with throw case default try this switch continue typeof delete let yield const export super debugger as async await static import from as",literal:"true false null undefined NaN Infinity",built_in:"eval isFinite isNaN parseFloat parseInt decodeURI decodeURIComponent encodeURI encodeURIComponent escape unescape Object Function Boolean Error EvalError InternalError RangeError ReferenceError StopIteration SyntaxError TypeError URIError Number Math Date String RegExp Array Float32Array Float64Array Int16Array Int32Array Int8Array Uint16Array Uint32Array Uint8Array Uint8ClampedArray ArrayBuffer DataView JSON Intl arguments require module console window document Symbol Set Map WeakSet WeakMap Proxy Reflect Promise"},n={cN:"number",v:[{b:"\\b(0[bB][01]+)"},{b:"\\b(0[oO][0-7]+)"},{b:e.CNR}],r:0},a={cN:"subst",b:"\\$\\{",e:"\\}",k:r,c:[]},c={cN:"string",b:"`",e:"`",c:[e.BE,a]};a.c=[e.ASM,e.QSM,c,n,e.RM];var i=a.c.concat([e.CBCM,e.CLCM]);return{aliases:["js","jsx"],k:r,c:[{cN:"meta",r:10,b:/^\s*['"]use (strict|asm)['"]/},{cN:"meta",b:/^#!/,e:/$/},e.ASM,e.QSM,c,e.CLCM,e.CBCM,n,{b:/[{,]\s*/,r:0,c:[{b:t+"\\s*:",rB:!0,r:0,c:[{cN:"attr",b:t,r:0}]}]},{b:"("+e.RSR+"|\\b(case|return|throw)\\b)\\s*",k:"return throw case",c:[e.CLCM,e.CBCM,e.RM,{cN:"function",b:"(\\(.*?\\)|"+t+")\\s*=>",rB:!0,e:"\\s*=>",c:[{cN:"params",v:[{b:t},{b:/\(\s*\)/},{b:/\(/,e:/\)/,eB:!0,eE:!0,k:r,c:i}]}]},{b:/</,e:/(\/\w+|\w+\/)>/,sL:"xml",c:[{b:/<\w+\s*\/>/,skip:!0},{b:/<\w+/,e:/(\/\w+|\w+\/)>/,skip:!0,c:[{b:/<\w+\s*\/>/,skip:!0},"self"]}]}],r:0},{cN:"function",bK:"function",e:/\{/,eE:!0,c:[e.inherit(e.TM,{b:t}),{cN:"params",b:/\(/,e:/\)/,eB:!0,eE:!0,c:i}],i:/\[|%/},{b:/\$[(.]/},e.METHOD_GUARD,{cN:"class",bK:"class",e:/[{;=]/,eE:!0,i:/[:"\[\]]/,c:[{bK:"extends"},e.UTM]},{bK:"constructor",e:/\{/,eE:!0}],i:/#(?!!)/}});
</script>
<script>
  window.addEventListener('load', () => {
    hljs.initHighlighting();
  });
</script> <script>
  /*! lazysizes - v4.0.3 */
  !function(a,b){var c=b(a,a.document);a.lazySizes=c,"object"==typeof module&&module.exports&&(module.exports=c)}(window,function(a,b){"use strict";if(b.getElementsByClassName){var c,d,e=b.documentElement,f=a.Date,g=a.HTMLPictureElement,h="addEventListener",i="getAttribute",j=a[h],k=a.setTimeout,l=a.requestAnimationFrame||k,m=a.requestIdleCallback,n=/^picture$/i,o=["load","error","lazyincluded","_lazyloaded"],p={},q=Array.prototype.forEach,r=function(a,b){return p[b]||(p[b]=new RegExp("(\\s|^)"+b+"(\\s|$)")),p[b].test(a[i]("class")||"")&&p[b]},s=function(a,b){r(a,b)||a.setAttribute("class",(a[i]("class")||"").trim()+" "+b)},t=function(a,b){var c;(c=r(a,b))&&a.setAttribute("class",(a[i]("class")||"").replace(c," "))},u=function(a,b,c){var d=c?h:"removeEventListener";c&&u(a,b),o.forEach(function(c){a[d](c,b)})},v=function(a,d,e,f,g){var h=b.createEvent("CustomEvent");return e||(e={}),e.instance=c,h.initCustomEvent(d,!f,!g,e),a.dispatchEvent(h),h},w=function(b,c){var e;!g&&(e=a.picturefill||d.pf)?e({reevaluate:!0,elements:[b]}):c&&c.src&&(b.src=c.src)},x=function(a,b){return(getComputedStyle(a,null)||{})[b]},y=function(a,b,c){for(c=c||a.offsetWidth;c<d.minSize&&b&&!a._lazysizesWidth;)c=b.offsetWidth,b=b.parentNode;return c},z=function(){var a,c,d=[],e=[],f=d,g=function(){var b=f;for(f=d.length?e:d,a=!0,c=!1;b.length;)b.shift()();a=!1},h=function(d,e){a&&!e?d.apply(this,arguments):(f.push(d),c||(c=!0,(b.hidden?k:l)(g)))};return h._lsFlush=g,h}(),A=function(a,b){return b?function(){z(a)}:function(){var b=this,c=arguments;z(function(){a.apply(b,c)})}},B=function(a){var b,c=0,e=d.throttleDelay,g=d.ricTimeout,h=function(){b=!1,c=f.now(),a()},i=m&&g>49?function(){m(h,{timeout:g}),g!==d.ricTimeout&&(g=d.ricTimeout)}:A(function(){k(h)},!0);return function(a){var d;(a=a===!0)&&(g=33),b||(b=!0,d=e-(f.now()-c),0>d&&(d=0),a||9>d?i():k(i,d))}},C=function(a){var b,c,d=99,e=function(){b=null,a()},g=function(){var a=f.now()-c;d>a?k(g,d-a):(m||e)(e)};return function(){c=f.now(),b||(b=k(g,d))}};!function(){var b,c={lazyClass:"lazyload",loadedClass:"lazyloaded",loadingClass:"lazyloading",preloadClass:"lazypreload",errorClass:"lazyerror",autosizesClass:"lazyautosizes",srcAttr:"data-src",srcsetAttr:"data-srcset",sizesAttr:"data-sizes",minSize:40,customMedia:{},init:!0,expFactor:1.5,hFac:.8,loadMode:2,loadHidden:!0,ricTimeout:0,throttleDelay:125};d=a.lazySizesConfig||a.lazysizesConfig||{};for(b in c)b in d||(d[b]=c[b]);a.lazySizesConfig=d,k(function(){d.init&&F()})}();var D=function(){var g,l,m,o,p,y,D,F,G,H,I,J,K,L,M=/^img$/i,N=/^iframe$/i,O="onscroll"in a&&!/glebot/.test(navigator.userAgent),P=0,Q=0,R=0,S=-1,T=function(a){R--,a&&a.target&&u(a.target,T),(!a||0>R||!a.target)&&(R=0)},U=function(a,c){var d,f=a,g="hidden"==x(b.body,"visibility")||"hidden"!=x(a,"visibility");for(F-=c,I+=c,G-=c,H+=c;g&&(f=f.offsetParent)&&f!=b.body&&f!=e;)g=(x(f,"opacity")||1)>0,g&&"visible"!=x(f,"overflow")&&(d=f.getBoundingClientRect(),g=H>d.left&&G<d.right&&I>d.top-1&&F<d.bottom+1);return g},V=function(){var a,f,h,j,k,m,n,p,q,r=c.elements;if((o=d.loadMode)&&8>R&&(a=r.length)){f=0,S++,null==K&&("expand"in d||(d.expand=e.clientHeight>500&&e.clientWidth>500?500:370),J=d.expand,K=J*d.expFactor),K>Q&&1>R&&S>2&&o>2&&!b.hidden?(Q=K,S=0):Q=o>1&&S>1&&6>R?J:P;for(;a>f;f++)if(r[f]&&!r[f]._lazyRace)if(O)if((p=r[f][i]("data-expand"))&&(m=1*p)||(m=Q),q!==m&&(y=innerWidth+m*L,D=innerHeight+m,n=-1*m,q=m),h=r[f].getBoundingClientRect(),(I=h.bottom)>=n&&(F=h.top)<=D&&(H=h.right)>=n*L&&(G=h.left)<=y&&(I||H||G||F)&&(d.loadHidden||"hidden"!=x(r[f],"visibility"))&&(l&&3>R&&!p&&(3>o||4>S)||U(r[f],m))){if(ba(r[f]),k=!0,R>9)break}else!k&&l&&!j&&4>R&&4>S&&o>2&&(g[0]||d.preloadAfterLoad)&&(g[0]||!p&&(I||H||G||F||"auto"!=r[f][i](d.sizesAttr)))&&(j=g[0]||r[f]);else ba(r[f]);j&&!k&&ba(j)}},W=B(V),X=function(a){s(a.target,d.loadedClass),t(a.target,d.loadingClass),u(a.target,Z),v(a.target,"lazyloaded")},Y=A(X),Z=function(a){Y({target:a.target})},$=function(a,b){try{a.contentWindow.location.replace(b)}catch(c){a.src=b}},_=function(a){var b,c=a[i](d.srcsetAttr);(b=d.customMedia[a[i]("data-media")||a[i]("media")])&&a.setAttribute("media",b),c&&a.setAttribute("srcset",c)},aa=A(function(a,b,c,e,f){var g,h,j,l,o,p;(o=v(a,"lazybeforeunveil",b)).defaultPrevented||(e&&(c?s(a,d.autosizesClass):a.setAttribute("sizes",e)),h=a[i](d.srcsetAttr),g=a[i](d.srcAttr),f&&(j=a.parentNode,l=j&&n.test(j.nodeName||"")),p=b.firesLoad||"src"in a&&(h||g||l),o={target:a},p&&(u(a,T,!0),clearTimeout(m),m=k(T,2500),s(a,d.loadingClass),u(a,Z,!0)),l&&q.call(j.getElementsByTagName("source"),_),h?a.setAttribute("srcset",h):g&&!l&&(N.test(a.nodeName)?$(a,g):a.src=g),f&&(h||l)&&w(a,{src:g})),a._lazyRace&&delete a._lazyRace,t(a,d.lazyClass),z(function(){(!p||a.complete&&a.naturalWidth>1)&&(p?T(o):R--,X(o))},!0)}),ba=function(a){var b,c=M.test(a.nodeName),e=c&&(a[i](d.sizesAttr)||a[i]("sizes")),f="auto"==e;(!f&&l||!c||!a[i]("src")&&!a.srcset||a.complete||r(a,d.errorClass)||!r(a,d.lazyClass))&&(b=v(a,"lazyunveilread").detail,f&&E.updateElem(a,!0,a.offsetWidth),a._lazyRace=!0,R++,aa(a,b,f,e,c))},ca=function(){if(!l){if(f.now()-p<999)return void k(ca,999);var a=C(function(){d.loadMode=3,W()});l=!0,d.loadMode=3,W(),j("scroll",function(){3==d.loadMode&&(d.loadMode=2),a()},!0)}};return{_:function(){p=f.now(),c.elements=b.getElementsByClassName(d.lazyClass),g=b.getElementsByClassName(d.lazyClass+" "+d.preloadClass),L=d.hFac,j("scroll",W,!0),j("resize",W,!0),a.MutationObserver?new MutationObserver(W).observe(e,{childList:!0,subtree:!0,attributes:!0}):(e[h]("DOMNodeInserted",W,!0),e[h]("DOMAttrModified",W,!0),setInterval(W,999)),j("hashchange",W,!0),["focus","mouseover","click","load","transitionend","animationend","webkitAnimationEnd"].forEach(function(a){b[h](a,W,!0)}),/d$|^c/.test(b.readyState)?ca():(j("load",ca),b[h]("DOMContentLoaded",W),k(ca,2e4)),c.elements.length?(V(),z._lsFlush()):W()},checkElems:W,unveil:ba}}(),E=function(){var a,c=A(function(a,b,c,d){var e,f,g;if(a._lazysizesWidth=d,d+="px",a.setAttribute("sizes",d),n.test(b.nodeName||""))for(e=b.getElementsByTagName("source"),f=0,g=e.length;g>f;f++)e[f].setAttribute("sizes",d);c.detail.dataAttr||w(a,c.detail)}),e=function(a,b,d){var e,f=a.parentNode;f&&(d=y(a,f,d),e=v(a,"lazybeforesizes",{width:d,dataAttr:!!b}),e.defaultPrevented||(d=e.detail.width,d&&d!==a._lazysizesWidth&&c(a,f,e,d)))},f=function(){var b,c=a.length;if(c)for(b=0;c>b;b++)e(a[b])},g=C(f);return{_:function(){a=b.getElementsByClassName(d.autosizesClass),j("resize",g)},checkElems:g,updateElem:e}}(),F=function(){F.i||(F.i=!0,E._(),D._())};return c={cfg:d,autoSizer:E,loader:D,init:F,uP:w,aC:s,rC:t,hC:r,fire:v,gW:y,rAF:z}}});
</script>
 <script>
  if ('serviceWorker' in navigator) {
    window.addEventListener('load', () => {
      navigator.serviceWorker.register('/service-worker.js').then(registration => {
        console.log('service worker registration was successful')
      }, err => {
        console.log('service worker registration failed')
      });
    });
  }
</script>
  
    <script>
  window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;
  ga('create', 'UA-66348622-2', 'auto');
  ga('send', 'pageview');
</script>
<script async src='https://www.google-analytics.com/analytics.js'></script>
  
</body>

</html>
